function import$(t,e){var n={}.hasOwnProperty;for(var i in e)n.call(e,i)&&(t[i]=e[i]);return t}!function(){var t;if(t=function(t){var e,n,i;return null==t&&(t={}),this.opt=t,this.fs={openedFile:null,content:{old:"",cur:""}},this.ed={},this.el=(i={},i.edit=(n=t.node).edit,i.view=n.view,e=i),["edit","view"].map(function(t){return e[t]="string"==typeof e[t]?ld$.find(e[t],0):e[t]}),this.addEditlet("cm"),this.sandbox=new Sandbox(import$({container:e.view,className:"w-100 h-100 border-0"},t.sandbox)),this},t.prototype=import$(Object.create(Object.prototype),{addEditlet:function(t){var e,n,i=this;return e=ld$.create({name:"div"}),this.el.edit.appendChild(e),this.ed[t]=new editlet[t]({root:e,opt:((n=this.opt).editlet||(n.editlet={}))[t]||{}}),this.ed[t].on("change",function(){return i.fs.content.cur=i.ed[t].get(),i.fs.content.old!==i.fs.content.cur&&i.update(),i.fs.content.old=i.fs.content.cur})},sync:function(){return this.render()},update:function(){return this.fs.fs.writeFileSync(this.fs.openedFile,this.ed.cm.get()),this.render()},open:function(t){var e,n,i,r,o;try{e=this.fs.fs.readFileSync(t).toString()}catch(t){return n=t,void console.log("file not found: ",n)}return this.fs.openedFile=t,i=this.fs.content,i.cur=e,i.old=e,r=(o=/\.([a-zA-Z]+)$/.exec(t))?o[1]:null,this.ed.cm.set({content:e,name:t,type:r})},render:debounce(function(){var t;return t=this.opt.renderer(this.fs),this.sandbox.load(t)}),setFiles:function(t,e){var n,i;if(null==e&&(e=[]),n=this.fs,n.fs=t,n.list=e,!e.length)return(i=function(n){var r,o,d,s,u=[];for(o=0,d=(r=t.readdirSync(n).map(function(t){return n+"/"+t})).length;o<d;++o)s=r[o],t.statSync(s).isDirectory()?u.push(i(s)):u.push(e.push(s));return u})("."),this.render()}}),"undefined"!=typeof window&&null!==window&&(window.Editor=t),"undefined"!=typeof module&&null!==module)module.exports=t}();